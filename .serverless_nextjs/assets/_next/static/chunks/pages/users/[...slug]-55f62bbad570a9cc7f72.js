_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[29],{LPrD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/[...slug]",function(){return n("nYXt")}])},jD7o:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return o}));var a=n("vOnD"),r=a.c.header.withConfig({displayName:"users__StyledHeader",componentId:"sc-1xqdnfk-0"})(["@media screen and (min-width:768px){}"]),c=a.c.div.withConfig({displayName:"users__TitleContainer",componentId:"sc-1xqdnfk-1"})(["padding:0 10px;margin-bottom:15px;"]),i=a.c.div.withConfig({displayName:"users__UserHeaderContainer",componentId:"sc-1xqdnfk-2"})(["display:grid;max-width:1000px;column-gap:50px;padding-bottom:30px;"]),s=a.c.div.withConfig({displayName:"users__UserDataContainer",componentId:"sc-1xqdnfk-3"})(["display:grid;grid-template-columns:50px 1fr;column-gap:10px;row-gap:10px;padding-left:10px;white-space:nowrap;@media screen and (min-width:768px){grid-template-columns:100px 1fr;padding-left:30px;column-gap:30px;}h1{font-size:20px;font-weight:500;color:",";width:100%;overflow:hidden;text-overflow:ellipsis;@media screen and (min-width:768px){font-size:24px;}}.icon-container{mask:url('/assets/icons/papers.svg');mask-size:contain;mask-repeat:no-repeat;mask-position:center;background-color:",";width:40px;height:46px;@media screen and (min-width:768px){width:80px;height:92px;}}.data-container{display:flex;flex-direction:column;justify-content:space-around;height:100px;color:",";font-weight:500;p{overflow:hidden;text-overflow:ellipsis;width:100%;font-size:14px;@media screen and (min-width:768px){font-size:16px;}}.amount{span{color:",";}}}"],(function(e){return e.theme.palette.primary.main}),(function(e){return e.theme.palette.secondary.dark}),(function(e){return e.theme.palette.secondary.dark}),(function(e){return e.theme.palette.primary.main})),o=a.c.div.withConfig({displayName:"users__TableWrapper",componentId:"sc-1xqdnfk-4"})(["max-height:500px;display:flex;width:100%;flex-direction:column;td[data-label='Categoria']{text-transform:capitalize;}"])},nYXt:function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSP",(function(){return T}));var a=n("nKUr"),r=n("o0o1"),c=n.n(r),i=n("HaE+"),s=n("KQm4"),o=n("rePB"),l=n("q1tI"),d=n("c32n"),u=n("sWYD"),p=n("I+5a"),f=n.n(p),b=n("20a2"),h=n("AHrM"),j=n("t66P"),m=n("jrVH"),x=n("1Yd/"),O=n("Cye+"),g=n("MsoC"),v=n("j4pp"),w=n("jD7o"),y=n("qyQd"),C=n("Qb08"),k=n("bQj1"),N=n("tGc6"),D=n("LG9w"),_=n("99WI");function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=!0;t.default=function(e){var t=e.profile,n=e.user,r=Object(l.useContext)(k.a),p=r.url,P=r.state,T=P.setSelectedMenu,E=P.setTransactionData,I=P.setTransactionsData,A=P.transactionsData,V=Object(l.useState)(!0),R=V[0],L=V[1],q=Object(l.useState)(!1),B=q[0],U=q[1],z=Object(l.useState)([]),M=z[0],H=z[1],F=Object(b.useRouter)(),G=F.query.slug,K=n.person.name.split(" ")[0],W=Object(l.useCallback)((function(){var e=[{name:"Status",fieldName:"status",type:"select",value:null,list:[{name:"Aprovado",fieldValue:"SUCCESS,PAID",checked:!1},{name:"Pendente",fieldValue:"PENDING,CREATED,AWAITING_CONFIRMATION,PROCESSING,WARNING",checked:!1},{name:"Recusado",fieldValue:"FAILED,ERROR,CANCELLED",checked:!1}]},{name:"Data",fieldName:"date",type:"date",value:null,date:[new Date,new Date]},{name:"Tipo de transa\xe7\xe3o",fieldName:"type",type:"select",value:null,list:[{name:"Pagamento - Boleto",categoryValue:"CASH_OUT",fieldValue:"BANK_SLIP",checked:!1},{name:"Dep\xf3sito - Boleto",categoryValue:"CASH_IN",fieldValue:"BANK_SLIP",checked:!1},{name:"Cart\xe3o de cr\xe9dito",fieldValue:"CREDIT_CARD",checked:!1},{name:"TED",fieldValue:"BANK_TED",checked:!1},{name:"Transfer\xeancia P2P",fieldValue:"TRANSFER",checked:!1}]},{name:"Valor",fieldName:"amount",type:"search",format:"money",value:[null,null]}];0===A.filters.length?(I((function(t){return S(S({},t),{},{filters:[].concat(e)})})),H([].concat(e))):H(Object(s.a)(A.filters))}),[]),Q=Object(j.b)("history-transactions"),Y=Object(l.useCallback)((function(){return M.reduce((function(e,t){if(t.value)return"date"===t.fieldName?S(S({},e),{},{fromDate:Object(d.a)(t.value[0]),toDate:Object(d.a)(t.value[1])}):"amount"===t.fieldName?null!==t.value[0]&&null!==t.value[1]?S(S({},e),{},{amountFrom:t.value[0],amountTo:t.value[1]}):e:S(S({},e),{},Object(o.a)({},t.fieldName,t.value));if("status"===t.fieldName){var n=t.list.filter((function(e){return!0===e.checked}));if(n.length===t.list.length)return e;if(n.length>0)return S(S({},e),{},{status:n.map((function(e){return e.fieldValue})).toString()})}if("type"===t.fieldName){var a=t.list.filter((function(e){return!0===e.checked}));if(a.length===t.list.length)return e;if(a.length>0){var r=a.map((function(e){return e.fieldValue})).filter((function(e,t,n){return t===n.indexOf(e)})).toString();if(a.filter((function(e){return"Pagamento - Boleto"===e.name||"Dep\xf3sito - Boleto"===e.name})).length>0){var c=a.map((function(e){return e.categoryValue})).filter((function(e,t,n){return t===n.indexOf(e)&&void 0!==e})).toString().replace(",","");return S(S({},e),{},{service:c,serviceType:r})}return S(S({},e),{},{serviceType:r})}}return e}),{})}),[M,A.filters]),X=Object(l.useCallback)(Object(i.a)(c.a.mark((function e(){var t,n,a,r,i,s=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:0,n=s.length>1&&void 0!==s[1]?s[1]:{},L(!0),e.prev=3,a=10,e.next=7,Q.refetch({id:G[0],limit:a,starting_after:a*t,queryParams:n});case 7:if(0!==(r=e.sent).data.length){e.next=16;break}if(!(A.transactions.length>0)){e.next=13;break}return I((function(e){return S(S({},e),{},{pageCount:e.pageCount-1})})),L(!1),e.abrupt("return");case 13:L(!1),e.next=18;break;case 16:I((function(e){return S(S({},e),{},{currentPage:t})})),t+1>=A.pageCount&&r.data.length===a&&I((function(e){return S(S({},e),{},{pageCount:e.pageCount+1})}));case 18:i=r.data.map((function(e){var t=!e.positive,n="".concat(t?"-":"+").concat(Object(h.a)(Number(e.amount))),a=Object(u.a)(new Date(e.createdAt),"dd/MM/yyyy");return S(S({},e),{},{date:a,value:n,isNegative:t})})),I((function(e){return S(S({},e),{},{transactions:i})})),L(!1),U(!1),e.next=30;break;case 24:e.prev=24,e.t0=e.catch(3),console.log(e.t0),I((function(e){return S(S({},e),{},{transactions:[]})})),U(!0),L(!1);case 30:case"end":return e.stop()}}),e,null,[[3,24]])}))),[A.filters,M,A.pageCount,A.transactions]),J=Object(l.useCallback)(Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==A.transactions.length){e.next=13;break}return e.prev=1,e.next=4,X(0);case 4:L(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),U(!0),L(!1);case 11:e.next=14;break;case 13:L(!1);case 14:case"end":return e.stop()}}),e,null,[[1,7]])}))),[]),$=Object(l.useCallback)(function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Y(),e.next=4,X(t.selected,n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[X,Y]),Z=Object(l.useCallback)(Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Y(),e.next=4,X(0,t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),[X,Y]),ee=Object(l.useCallback)((function(e){E(e),T("/users"),"ledger"!==e.arr?F.push("".concat(p.baseUrl,"/history-transactions/").concat(e.arr,"/").concat(e.method,"/").concat(e.id,"/").concat(K,"/").concat(G[0])):F.push("".concat(p.baseUrl,"/history-transactions/").concat(e.arr,"/").concat(e.index,"/").concat(e.id,"/").concat(K,"/").concat(G[0]))}),[]);return Object(l.useEffect)((function(){W(),J()}),[J,W]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(x.a,{title:"Swipe - Hist\xf3rico de Transa\xe7\xf5es",shouldExcludeTitleSuffix:!0,image:"logo.png",shouldIndexPage:!1}),Object(a.jsx)(m.a,{profile:t.data}),Object(a.jsxs)(v.Wrapper,{children:[Object(a.jsx)(_.a,{children:Object(a.jsxs)(v.StyledMain,{children:[Object(a.jsx)(N.a,{pages:[{name:"Usu\xe1rios",url:"".concat(p.baseUrl,"/users")},{name:K,url:"".concat(p.baseUrl,"/users/").concat(Array.isArray(G)&&G.join("/"))}]}),Object(a.jsxs)(w.a,{children:[Object(a.jsx)(w.e,{children:Object(a.jsx)(v.ShadowBox,{children:Object(a.jsxs)(w.d,{children:[Object(a.jsx)("span",{}),Object(a.jsx)("h1",{children:n.person.name}),Object(a.jsx)("div",{className:"icon-container"}),Object(a.jsxs)("div",{className:"data-container",children:[Object(a.jsxs)("p",{className:"cpf",children:["CPF: ",Object(D.a)(n.person.cpf).formatedValue]}),Object(a.jsxs)("p",{className:"date",children:["Cliente ativo desde: ",Object(u.a)(new Date(n.createdAt),"dd/MM/yyyy")]}),Object(a.jsxs)("p",{className:"amount",children:["Saldo dispon\xedvel: ",Object(a.jsx)("span",{children:"R$ 2.582,15"})]})]})]})})}),Object(a.jsx)(g.a,{state:{list:M||A.filters,setList:H},action:Z,width:"700px"})]}),Object(a.jsx)(v.ShadowBox,{className:"mt-40",children:Object(a.jsxs)(v.TableContainer,{children:[Object(a.jsx)(y.a,{children:Object(a.jsx)(C.a,{isLoading:R,errorMessage:"N\xe3o foi poss\xedvel exibir os dados.",isError:B,children:Object(a.jsx)(w.b,{children:Object(a.jsx)(_.a,{children:Object(a.jsxs)(v.ResponsiveTable,{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Status"}),Object(a.jsx)("th",{children:"Data"}),Object(a.jsx)("th",{children:"Tipo de Transa\xe7\xe3o"}),Object(a.jsx)("th",{children:"Valor"}),Object(a.jsx)("th",{children:"Categoria"})]})}),Object(a.jsx)("tbody",{children:A.transactions.map((function(e,t){return Object(a.jsxs)(v.TrLink,{onClick:function(){return ee(e)},children:[Object(a.jsx)("td",{"data-label":"Status",children:Object(a.jsx)(v.Icon,{status:e.status})}),Object(a.jsx)("td",{"data-label":"Data",children:e.date}),Object(a.jsx)("td",{"data-label":"Tipo de transa\xe7\xe3o",children:e.methodType}),Object(a.jsx)("td",{"data-label":"Valor",children:e.value}),Object(a.jsx)("td",{"data-label":"Categoria",children:e.arr})]},t)}))})]})})})})}),Object(a.jsx)(v.PaginateContainer,{children:Object(a.jsx)(f.a,{previousLabel:"<",nextLabel:">",breakLabel:"...",breakClassName:"break-me",activeClassName:"active",containerClassName:"pagination",subContainerClassName:"pages pagination",forcePage:A.currentPage,pageCount:A.pageCount,marginPagesDisplayed:2,pageRangeDisplayed:2,onPageChange:$})})]})})]})}),Object(a.jsx)(O.a,{})]})]})}},tGc6:function(e,t,n){"use strict";var a=n("nKUr"),r=n("KQm4"),c=n("q1tI"),i=n("YFqc"),s=n.n(i),o=n("vOnD").c.div.withConfig({displayName:"BreadCrumb__Container",componentId:"liiqzx-0"})(["padding-top:5px;padding-right:40px;position:absolute;top:0;left:10px;z-index:1;ul{list-style:none;display:flex;overflow:hidden;li{max-width:120px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:",";&:after{content:'/';font-size:10px;padding:0 3px;}&:last-child{&:after{content:'';}}a{font-size:10px;font-weight:500;&:link,&:visited{color:",";text-decoration:none;}&:hover,&:active{color:",";text-decoration:underline;}}}}@media screen and (min-width:768px){padding-top:10px;padding-right:80px;left:calc("," + 40px);li{max-width:200px;}}"],(function(e){return e.theme.palette.secondary.dark}),(function(e){return e.theme.palette.secondary.dark}),(function(e){return e.theme.palette.secondary.main}),(function(e){return e.theme.sidebarWidth.w768}));t.a=function(e){var t=e.pages,n=Object(c.useState)([]),i=n[0],l=n[1],d=Object(c.useCallback)((function(){var e=t.map((function(e){return{breadcrumb:e.name,href:e.url}}));l(Object(r.a)(e))}),[t]);return Object(c.useEffect)((function(){d()}),[d]),Object(a.jsx)(o,{children:Object(a.jsx)("ul",{className:"breadcrumb",children:i.map((function(e,t){return Object(a.jsx)("li",{children:Object(a.jsx)(s.a,{href:e.href,children:Object(a.jsx)("a",{title:e.breadcrumb,children:e.breadcrumb})})},t)}))})})}}},[["LPrD",0,1,2,3,4,5,6,7,8,10]]]);